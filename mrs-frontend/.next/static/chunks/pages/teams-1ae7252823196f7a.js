(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{290:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams",function(){return a(457)}])},7002:function(e,n,a){"use strict";a.d(n,{ZZ:function(){return t},fC:function(){return c},fg:function(){return i},s9:function(){return r}});let s="".concat("https://team-manager-backend.up.railway.app","/api/teams");async function t(e){let n=await fetch(s),a=await n.json();e(a)}async function i(e,n,a,i){let c={name:e.currentTarget.teamname.value};if(!c.name){i("Please choose a name.");return}if(1!=c.name.split(" ").length){i("Names cannot contain a space.");return}let r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},l=await fetch(s,r);l.ok?(await t(n),a(!1),i("")):i("Team name already taken.")}async function c(e,n){await fetch("".concat(s,"/").concat(e),{method:"DELETE"}),await t(n)}async function r(e,n,a){let s={empId:e,teamToId:n};if(!s.teamToId){alert("Please choose a teamid.");return}let i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};await fetch("".concat("https://team-manager-backend.up.railway.app","/api/employees"),i),await t(a)}},457:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return S}});var s=a(5893),t=a(1664),i=a.n(t),c=a(7027),r=a(3299),l=a(9795),d=a(967),o=a(8239),m=a(5142),h=a(416),u=a(8156),x=a(7458),j=a(5150),p=a(7294),f=a(7002),Z=a(9294),N=a(9272),g=a(8493),v=a(6963),y=a(2256),b=a(7257),w=a(3625);function T(e){let{emp:n}=e,[{isDragging:a},t]=(0,Z.c)(()=>({type:"BOX",item:{empId:n.id},collect:e=>({isDragging:e.isDragging()})}));return(0,s.jsxs)("div",{ref:t,className:"teamcard-employee-details",children:[(0,s.jsxs)("div",{children:[n.firstName," ",n.lastName]}),(0,s.jsx)("div",{children:n.type})]})}function C(e){let[n,a]=(0,p.useState)(!1),{team:t,setTeams:c}=e,[{canDrop:r,isOver:l},o]=(0,N.L)(()=>({accept:"BOX",collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()}),drop:e=>(0,f.s9)(e.empId,t.id,c)}));return(0,s.jsx)("main",{ref:o,className:"teamcard-main",children:(0,s.jsxs)(y.Z,{className:"teamcard-card",children:[(0,s.jsx)(b.Z,{src:"",wrapped:!0,ui:!1}),(0,s.jsxs)(y.Z.Content,{children:[(0,s.jsx)(y.Z.Header,{children:(0,s.jsx)(i(),{className:"teamcard-teamLink",href:"/teams/"+t.id,children:t.name})}),(0,s.jsx)("div",{className:"teamcard-employees",children:t.employees.map(e=>(0,s.jsx)(g.W,{backend:v.PD,children:(0,s.jsx)(T,{emp:e})},e.id))})]}),(0,s.jsx)(y.Z.Content,{extra:!0,children:(0,s.jsxs)("div",{className:"ui two buttons",children:[(0,s.jsx)(d.Z,{basic:!0,color:"green",href:"/teams/"+t.id,children:"Team Details"}),(0,s.jsx)(d.Z,{basic:!0,color:"red",onClick:()=>a(!0),children:"Delete Team"}),(0,s.jsx)(w.Z,{open:n,onCancel:()=>a(!1),onConfirm:()=>{(0,f.fC)(t.name,c),a(!1)}})]})})]})})}function k(){let{data:e,status:n}=(0,r.useSession)(),[a,t]=(0,p.useState)([]);(0,p.useEffect)(()=>{(0,f.ZZ)(t)},[]);let[i,c]=(0,p.useState)(!1),[Z,N]=(0,p.useState)("");return"authenticated"===n?(0,s.jsxs)("div",{className:"teams-content-wrap",children:[(0,s.jsxs)("div",{className:"teams-add-info",children:[(0,s.jsxs)(l.Z,{animation:!1,onClose:()=>c(!1),onOpen:()=>c(!0),open:i,trigger:(0,s.jsx)(d.Z,{className:"teams-modal-btn",inverted:!0,color:"orange",children:"Add Team +"}),children:[(0,s.jsx)(l.Z.Header,{children:"Make Your Team"}),(0,s.jsxs)(l.Z.Content,{children:[(0,s.jsxs)(o.Z,{onSubmit:e=>{e.preventDefault(),(0,f.fg)(e,t,c,N)},children:[(0,s.jsxs)(o.Z.Field,{children:[(0,s.jsx)(m.Z,{children:"Team Name"}),(0,s.jsx)(h.Z,{icon:"users",placeholder:"Name your team",type:"text",name:"teamname"})]}),(0,s.jsx)(d.Z,{type:"submit",children:"Add Team +"})]}),Z.length>0?(0,s.jsx)(u.Z,{warning:!0,children:(0,s.jsx)("p",{children:Z})}):null]})]}),(0,s.jsx)(d.Z,{className:"teams-signout-btn",size:"tiny",onClick:()=>(0,r.signOut)(),children:"Sign out"}),(0,s.jsx)(x.Z,{className:"teams-helphover",content:"Drag an employee to a different team to move them.",trigger:(0,s.jsx)(d.Z,{color:"orange",icon:"question"})})]}),(0,s.jsx)("div",{className:"teams-TeamCard-box",children:a.map(e=>(0,s.jsx)(g.W,{backend:v.PD,children:(0,s.jsx)(C,{team:e,setTeams:t})},e.id))})]}):(0,s.jsx)("div",{className:"teams-content-wrap",children:(0,s.jsx)("div",{className:"signin-container",children:(0,s.jsxs)("div",{className:"signin-box",children:[(0,s.jsx)("p",{className:"signin-text",children:"Authenticated users only"}),(0,s.jsxs)(d.Z,{basic:!0,color:"blue",className:"signin-btn",onClick:()=>(0,r.signIn)(),children:["Sign in",(0,s.jsx)(j.Z,{name:"chevron right"})]})]})})})}function S(){return(0,s.jsxs)("main",{className:"teams-main",children:[(0,s.jsxs)("nav",{className:"teams-navbar",children:[(0,s.jsx)(i(),{className:"teams-navlink",href:"/",children:"Home"}),(0,s.jsx)(i(),{className:"teams-navlink",href:"/teams",children:"Teams"}),(0,s.jsx)(i(),{className:"teams-navlink",href:"/employees",children:"People"})]}),(0,s.jsxs)("div",{className:"teams-body-container",children:[(0,s.jsx)(k,{}),(0,s.jsx)("footer",{className:"teams-footer",children:(0,s.jsxs)(c.Z,{horizontal:!0,relaxed:"very",inverted:!0,children:[(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(c.Z.Content,{children:(0,s.jsx)(c.Z.Header,{children:"Simon.H"})})}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(c.Z.Content,{children:(0,s.jsx)(c.Z.Header,{children:"Rasmus.R"})})}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(c.Z.Content,{children:(0,s.jsx)(c.Z.Header,{children:"Mona.T"})})})]})})]})]})}}},function(e){e.O(0,[267,550,781,774,888,179],function(){return e(e.s=290)}),_N_E=e.O()}]);